# Named Entity Translation Scripts
* LV-NER - Workflow or NE tagging of Latvian texts

* extract_nes.py - Script to extract NEs for German an English texts

	For German (use spacy):

		```sh
   		python extract_nes.py -f <folder_with_all_files_to_be_processed> -t spacy -l de
   		```
   	
   	For English (use nltk standford NER):
   	
  		```sh
   		python3 extract_nes.py -f <folder_with_all_files_to_be_processed> -t stanford -l en
   		``` 	
	

* build_named_entity_dictionary.py - Script to build a dictionary for NE translations
	
	1. Compute alignements between source and target tokens. The output should look like this:
	
		0-0 1-1 2-2 3-3 4-4 5-5
		0-0
		2-0 1-1 0-2 3-3 4-4 5-5 6-6 7-7 8-8 9-9 10-10
		
		Where the first index corresponds to the source token and the second index to the target token.
		
		
	2. Call the build_named_entity_dictionary.py script with the NE tagged source and target sides of the corpus plus the alignments between them.
	
		```sh
   		python build_named_entity_dictionary.py -s <source_ne.txt> -t <target_ne.txt> -a <alignment_output>
   		```
   		
* enforce_ne.py - Script to enforce the translation of NEs

	For Nematus model:

		```sh
   		python enforce_ne.py -a <nematus_alignment_output.txt> -n <source_ne.txt> -d <ne_dictionary.pkl> -f nematus 
   		```
   		
   		where:
   		 
   		-a is the alignment output by Nematus as .txt
   		-n is the NE tagged source text
   		-d is the dictionary pickle file created in step above
   		-f is the framework used for translation (nematus)
   		(-no_bpe) optional: if no BPE was used
   		
   	
   	For Neural Monkey model:
   	
 		```sh
   		python enforce_ne.py -a <neuralmonkey_alignment_output.npy> -s <source_bpe.txt> -t <output_translation_bpe.txt> -n <source_ne.txt> -d <ne_dictionary.pkl> -f neuralmonkey 
   		```  		
   		
   		where:
   		
   		-a is the alignment output by Neural Monkey as .npy
   		-s is the bpe split source text
   		-t is the bpe split translation generated by Neural monkey
   		-n is the NE tagged source text
   		-d is the dictionary pickle file created in step above
   		-f is the framework used for translation (neuralmonkey)
   		(-no_bpe) optional: if no BPE was used
   	 
 
* ne_matrix.py - Helper script for enforce_ne.py
